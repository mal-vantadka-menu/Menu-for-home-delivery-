<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="yes" name="mobile-web-app-capable"/>
<title>Malvan Tadka Kharghar - Home Delivery Menu (iPhone Compatible)</title>
<style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Segoe UI',sans-serif;
      background-color:#f6f6f6;
      color:#222;
      padding:16px;
      display:flex;
      align-items:flex-start;
      gap:24px;
      flex-wrap:wrap;
    }
    .overlay{
      background:#ffffff;
      padding:20px;
      border-radius:16px;
      flex:1;
      box-shadow:0 4px 16px rgba(0,0,0,0.1);
      min-width:280px;
    }
    h1{
      font-size:34px;
      color:#b85c00;
      text-align:center;
      margin:6px 0;
    }
    h2{
      text-align:center;
      margin-bottom:18px;
      color:#444;
      letter-spacing:1px;
      font-size:18px;
    }
    .menu{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:10px;
    }
    .section{
      background:#fff8ef;
      border-radius:12px;
      border:1px solid #f0e0c0;
      box-shadow:0 2px 8px rgba(0,0,0,0.05);
      overflow:hidden;
      transition:all 0.3s ease;
    }
    .section h3{
      margin:0;
      color:#fff;
      border-bottom:2px solid #f2d299;
      padding:10px;
      font-size:18px;
      cursor:pointer;
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:#b85c00;
      position:relative;
      top:0;
      z-index:10;
    }
    .section h3::after{content:'\25B6';font-size:20px;transition:transform 0.3s;}
    .section.expanded h3::after{transform:rotate(90deg);}
    .items-container{max-height:0;overflow:hidden;transition:max-height 0.4s ease;}
    .section.expanded .items-container{max-height:2000px;}
    .item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:8px 10px;
      border-bottom:1px dashed #ddd;
      font-size:15px;
      color:#333;
      flex-wrap:wrap;
    }
    .item-price{
      display:flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
      margin-left:auto;
    }
    .item-name{
      flex:1;
    }
    .add-btn{
      background:#ffcc66;
      color:#000;
      border:none;
      padding:5px 10px;
      border-radius:8px;
      cursor:pointer;
      font-weight:bold;
      transition:background 0.2s;
      font-size:14px;
    }
    .add-btn:hover{background:#ffb833;}
    .cart{
      background:#ffffff;
      padding:16px;
      border-radius:12px;
      box-shadow:0 4px 16px rgba(0,0,0,0.1);
      color:#222;
      min-width:280px;
      flex:0 0 340px;
    }
    .cart h3{text-align:center;margin-bottom:8px;color:#b85c00;}
    .cart-items{max-height:400px;overflow:auto;}
    .cart-item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:6px 0;
      border-bottom:1px solid #eee;
      font-size:14px;
      flex-wrap:wrap;
      gap:4px;
    }
    .qty-controls{display:inline-flex;gap:6px;align-items:center;}
    .qty-btn{
      background:#eee;
      border:1px solid #ddd;
      padding:4px 8px;
      border-radius:6px;
      cursor:pointer;
    }
    .remove-btn{
      background:#ff6b6b;
      color:white;
      border:none;
      padding:4px 6px;
      border-radius:8px;
      cursor:pointer;
      font-size:13px;
    }
    .checkout{
      margin-top:8px;
      width:100%;
      padding:10px;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:bold;
      font-size:15px;
      text-decoration:none;
      display:inline-block;
      text-align:center;
      background:#2a9d8f;
      color:white;
    }
    .checkout:hover{background:#21867a;}
    .small{font-size:12px;color:#666;}
    .modal-bg{
      display:none;
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background:rgba(0,0,0,0.5);
      align-items:center;
      justify-content:center;
      z-index:999;
    }
    .modal{
      background:white;
      padding:20px;
      border-radius:12px;
      max-width:90%;
      width:350px;
      box-shadow:0 4px 20px rgba(0,0,0,0.3);
      text-align:left;
    }
    .modal h3{text-align:center;margin-bottom:10px;color:#b85c00;}
    .modal pre{white-space:pre-wrap;font-size:14px;margin-bottom:15px;}
    .modal-buttons{display:flex;justify-content:space-between;gap:10px;}
    .close-btn,.whatsapp-btn{
      flex:1;
      padding:8px 16px;
      border:none;
      border-radius:8px;
      font-size:14px;
      cursor:pointer;
    }
    .close-btn{background:#b85c00;color:white;}
    .whatsapp-btn{background:#25d366;color:white;}
    @media (max-width:768px){
      body{flex-direction:column;align-items:stretch;gap:16px;}
      .overlay,.cart{width:100%;flex:none;}
      .menu{grid-template-columns:1fr;}
      .item{font-size:14px;}
      .cart-item{font-size:13px;}
      .checkout{font-size:14px;}
    }
    .info-row{
      padding:8px 10px;
      text-align:center;
      font-weight:bold;
      border-top:1px solid #ddd;
      font-size:14px;
    }
    .price-pill{display:none;}
    </style>
</head>
<body>
<div class="overlay">
  <h1>Home Delivery Menu</h1>
  <h2>Malvan Tadka Kharghar<br/>
    <span style="font-size:14px;color:#b85c00;">10% discount on home delivery</span>
  </h2>

  <input type="text" id="searchBar" placeholder="Search item..." style="width:100%;padding:10px;font-size:16px;margin-bottom:15px;border-radius:8px;border:1px solid #ccc;">

  <div class="menu" id="menu"></div>
</div>

<div class="cart">
  <h3>ðŸ›’ Your Cart</h3>
  <div class="cart-items" id="cart-items">(No items yet)</div>
  <button class="checkout" id="checkout">Checkout</button>
</div>

<div class="modal-bg" id="modal-bg">
  <div class="modal">
    <h3>Your Cart</h3>
    <pre id="modal-content"></pre>

    <form id="delivery-form" style="display:flex;flex-direction:column;gap:8px;margin-top:10px;">
      <input id="name" type="text" placeholder="Name" required style="padding:8px;border:1px solid #ccc;border-radius:6px;">
      <input id="mobile" type="tel" placeholder="Mobile Number" required style="padding:8px;border:1px solid #ccc;border-radius:6px;">
      <input id="building" type="text" placeholder="Building Name / Area" required style="padding:8px;border:1px solid #ccc;border-radius:6px;">
      <input id="flat" type="text" placeholder="Flat / Room No" required style="padding:8px;border:1px solid #ccc;border-radius:6px;">
      <input id="sector" type="text" placeholder="Sector" required style="padding:8px;border:1px solid #ccc;border-radius:6px;">
    </form>

    <button id="edit-details" style="margin-bottom:10px;margin-top:10px;padding:8px;border:none;border-radius:8px;background:#3b82f6;color:white;width:100%;font-size:14px;cursor:pointer;">
      Edit Details
    </button>

    <div class="modal-buttons">
      <button class="close-btn" id="close-modal">Close</button>
      <button class="whatsapp-btn" id="whatsapp-send">Send Order on WhatsApp</button>
    </div>

    <a href="tel:9833688666"
       style="display:block;margin-top:8px;text-align:center;text-decoration:none;background:#3b82f6;color:white;padding:8px 0;border-radius:8px;font-size:14px;font-weight:bold;">
      Call for Confirmation
    </a>
  </div>
</div>

<script>
/* Updated menuData: APC replaced where numeric provided; special items have price object with full/half */
var menuData = [
  {
    "title": "BEST SELLER VEG ITEMS",
    "items": [
      {"name":"PANEER TIKKA","price":380},
      {"name":"VEG FRIED RICE","price":240},
      {"name":"VEG TRIPLE SHEZWAN FRIED RICE","price":340},
      {"name":"PANEER CHILLY","price":299},
      {"name":"VEG SPRING ROLL","price":300},
      {"name":"VEG MANCHURIAN","price":200},
      {"name":"VEG BIRYANI","price":260},
      {"name":"SOLKADI","price":85}
    ]
  },
  {
    "title": "BEST SELLER NONVEG ITEMS",
    "items": [
      {"name":"POMFRET TAWA FRY","price":699},
      {"name":"BOMBIL RAWA FRY","price":299},
      {"name":"CHICKEN LOLLYPOP","price":310},
      {"name":"DRUMS OF HEAVEN","price":330},
      {"name":"CHICKEN TANDOORI FULL","price":440},
      {"name":"CHICKEN PAHADI TIKKA","price":370},
      {"name":"CHICKEN FRIED RICE","price":310},
      {"name":"CHICKEN TRIPLE SHEZWAN FRIED RICE","price":410}
    ]
  },
  {
    "title": "SOUP",
    "items": [
      {"name":"CREAM OF TOMATO(VEG)","price":160},
      {"name":"CREAM OF MUSHROOM(VEG)","price":160},
      {"name":"CREAM OF CHICKEN(NONVEG)","price":175},
      {"name":"MANCHOW SOUP(VEG)","price":160},
      {"name":"MANCHOW SOUP(NONVEG)","price":175},
      {"name":"MANCHOW SOUP(SEAFOOD)","price":210},
      {"name":"SWEET CORN PEARL SOUP(VEG)","price":160},
      {"name":"SWEET CORN PEARL SOUP(NONVEG)","price":175},
      {"name":"LEMON CORIENDER SOUP(VEG)","price":160},
      {"name":"LEMON CORIENDER SOUP(NONVEG)","price":175}
    ]
  },
  {
    "title": "CRAB",
    "items": [
      {"name":"CRAB TANDOORI","price":800},
      {"name":"CRAB SUKHA","price":800},
      {"name":"CRAB LAPETA","price":800},
      {"name":"CRAB MALVANI CURRY","price":800},
      {"name":"CRAB GOAN CURRY","price":800},
      {"name":"CRAB MANGLORIAN CURRY","price":800},
      {"name":"CRAB MALVANI MASALA","price":800}
     ]
   },
   {
     "title": "PRAWNS",
     "items": [
      {"name":"PRAWNS TAWA FRY","price":599},
      {"name":"PRAWNS KOLIWADA","price":599},
      {"name":"PRAWNS BUTTER GARLIC","price":599},
      {"name":"PRAWNS KOKANI TAWA","price":599},
      {"name":"PRAWNS MANGLORIAN TAWA","price":599},
      {"name":"PRAWNS TANDOORI","price":599},
      {"name":"PRAWNS SUKHA","price":599},
      {"name":"PRAWNS LAPETA","price":599},
      {"name":"PRAWNS MALVANI CURRY","price":599},
      {"name":"PRAWNS GOAN CURRY","price":599},
      {"name":"PRAWNS MALVANI CURRY","price":599},
      {"name":"PRAWNS MANGLORIAN CURRY","price":599},
      {"name":"PRAWNS BIRYANI","price":649} 
    ]
  },
  {
    "title": "FISH-POMFRET(STARTER)",
    "items": [
      {"name":"TANDOORI","price":699},
      {"name":"BANJARA","price":699},
      {"name":"LASUNI","price":699},
      {"name":"PAHADI","price":699},
      {"name":"TAWA FRY","price":699},
      {"name":"RAWA FRY","price":699},
      {"name":"KOLIWADA","price":699},
      {"name":"CHILLY HOT GARLIC","price":699},
      {"name":"BUTTER GARLIC","price":699}
    ]
  },
  {
    "title": "POMFRET (SEMI-GRAVY)",
    "items": [
      {"name":"KONKANI TAWA","price":699},
      {"name":"MANGLORAIN TAWA","price":699},
      {"name":"SUKHA","price":699},
      {"name":"LAPETA","price":699}
    ]
  },
  {
    "title": "POMFRET(MAIN-COURSE)",
    "items": [
      {"name":"MALVANI CURRY","price":699},
      {"name":"GOAN CURRY","price":699},
      {"name":"MANGLORAIN CURRY","price":699}
    ]
  },
  {
    "title": "SURMAI SLICE(STARTER)",
    "items": [
      {"name":"TAWA","price":499},
      {"name":"RAWA","price":499},
      {"name":"KOLIWADA","price":499}
    ]
  },
  {
    "title": "SURMAI (SEMI-DRY)",
    "items": [
      {"name":"KONKANI TAWA","price":499},
      {"name":"MANGLORIAN TAWA","price":499},
      {"name":"SUKHA","price":499},
      {"name":"LAPETA","price":499}
    ]
  },
  {
    "title": "BOMBIL",
    "items": [
      {"name":"BOMBIL RAWA FRY","price":299},
      {"name":"BOMBIL KOLIWADA","price":299}
    ]
  },
  {
    "title": "FISH RAWAS",
    "items": [
      {"name":"RAWAS TIKKA","price":499},
      {"name":"RAWAS TAWA FRY","price":499},
      {"name":"RAWAS TANDOORI","price":499},
      {"name":"RAWAS LASUNI","price":499},
      {"name":"RAWAS PAHADI","price":499},
      {"name":"RAWAS HOT GARLIC","price":499},
      {"name":"RAWAS BUTTER GARLIC","price":499},
      {"name":"RAWAS KOKANI TAWA","price":499},
      {"name":"RAWAS MANGLORIAN TAWA","price":499},
      {"name":"RAWAS LAPETA","price":499},
      {"name":"RAWAS SUKHA","price":499},
      {"name":"RAWAS MALVANI CURRY","price":499},
      {"name":"RAWAS GOAN CURRY","price":499},
      {"name":"RAWAS MANGLORIAN CURRY","price":499} 
    ]
  },
  {
    "title": "CHINESE STARTER(VEG)",
    "items": [
      {"name":"STIR FRIED VEG IN HOT GARLIC SOUCE","price":285},
      {"name":"PANEER DRY RED CHILLY","price":299},
      {"name":"PANEER HOT GARLIC","price":299},
      {"name":"PANEER SATAY","price":299},
      {"name":"THREAD PANEER","price":299},
      {"name":"CRISPY BROCOLLI AND MUSHROOM BLACK BEAN","price":299},
      {"name":"PANEER IN CHOICE OF SOUCE","price":299},
      {"name":"HONEY CHILLY POTATO","price":320}
    ]
  },
  {
    "title": "CHINESE STARTER(NON-VEG)",
    "items": [
      {"name":"DRY RED CHILLY CHICKEN","price":310},
      {"name":"CHICKEN 65","price":310},
      {"name":"CRISPY SHREDDED CHICKEN","price":310},
      {"name":"GINGER CHICKEN","price":310},
      {"name":"CHICKEN LOLLYPOP","price":310},
      {"name":"DRUMS OF HEAVEN","price":330},
      {"name":"KUNG PAO CHICKEN","price":340},
      {"name":"CHICKEN SALT N PEPPER","price":330},
      {"name":"KOREAN CHICKEN WINGS","price":330},
      {"name":"GOLDEN FRIED PRAWNS","price":599}
    ]
  },
  {
    "title": "TANDOOR STARTER(VEG)",
    "items": [
      {"name":"VEG SEEKH KABAB","price":315},
      {"name":"PANEER CHEESY SEEKH","price":335},
      {"name":"ACHARI BROCOLLI","price":335},
      {"name":"MULTANI MUSHROOM","price":350},
      {"name":"PANEER MALAI TIKKA","price":340},
      {"name":"TANDOORI VEG PLATTER","price":699},
      {"name":"PANEER AMRITSARI TIKKA","price":380},
      {"name":"PANEER PAHADI TIKKA","price":380},
      {"name":"PANEER BANJARA TIKKA","price":380},
      {"name":"PANEER ANGARA TIKKA","price":380},
      {"name":"TANDOORI ALOO","price":299}
    ]
  },
  {
    "title": "TANDOOR STARTER(NON-VEG)",
    "items": [
      {"name":"TANDOORI CHICKEN FULL","price":440},
      {"name":"TANDOORI CHICKEN HALF","price":250},
      {"name":"CHICKEN KALAMI KABAB","price":380},
      {"name":"CHICKEN TANGDI KABAB","price":390},
      {"name":"CHICKEN TIKKA","price":370},
      {"name":"CHICKEN PAHADI TIKKA","price":370},
      {"name":"CHICKEN BANJARA TIKKA","price":370},
      {"name":"CHICKEN SHOLE KABAB","price":370},
      {"name":"CHICKEN KASTOORI KABAB","price":370},
      {"name":"CHICKEN SEEKH KABAB","price":385},
      {"name":"CHICKEN CHATPATA KABAB","price":370},
      {"name":"CHICKEN ALISHAN KABAB","price":370},
      {"name":"TANDOORI LOLLYPOP","price":360},
      {"name":"TANDOORI KABAB PLATTER","price":1100},
      {"name":"CHICKEN IRANI KABAB","price":449},
      {"name":"MUTTON GALOUTI KABAB","price":499},
      {"name":"MUTTON SEEKH KABAB","price":549},
      {"name":"MURG MALAI TIKKA","price":400},
      {"name":"CHICKEN ANGARA TIKKA","price":370}
    ]
  },
  {
    "title": "MALVANI MAIN-COURSE(VEG)",
    "items": [
      {"name":"MIX VEG MALVANI","price":280},
      {"name":"PANEER MALVANI","price":310},
      {"name":"MUSHROOM MALVANI","price":310},
      {"name":"DAL MALVANI","price":260}
    ]
  },
  {
    "title": "MALVANI MAIN-COURSE(NON-VEG)",
    "items": [
      {"name":"CHICKEN HANDI MALVANI","price":{"full":699,"half":399}},
      {"name":"CHICKEN SUKHA","price":{"full":699,"half":399}},
      {"name":"CHICKEN(BOILER) LAPETA","price":{"full":699,"half":399}},
      {"name":"DESI CHICKEN HANDI MALVANI","price":{"full":899,"half":499}},
      {"name":"DESI CHICKEN SUKHA","price":{"full":899,"half":499}},
      {"name":"DESI CHICKEN LAPETA","price":{"full":899,"half":499}},
      {"name":"MUTTON HANDI MALVANI","price":{"full":999,"half":549}},
      {"name":"MUTTON SUKHA","price":{"full":999,"half":549}},
      {"name":"MUTTON LAPETA","price":{"full":999,"half":549}},
      {"name":"CHICKEN SAOJI","price":399},
      {"name":"CHICKEN SAGOTI","price":399},
      {"name":"CHICKEN GHEE ROAST","price":449},
      {"name":"MUTTON SAOJI","price":549},
      {"name":"MUTTON SAGOTI","price":549},
      {"name":"EGG MALVANI CURRY","price":249},
      {"name":"KOMBDI VADE(BOILER)","price":549},
      {"name":"MUTTON VADE","price":599},
      {"name":"SURMAI VADE","price":599},
      {"name":"PRAWNS VADE","price":599},
      {"name":"EXTRA VADE(5PSC)","price":110}
    ]
  },
  {
    "title": "NORTH INDIAN MAIN COURSE(VEG)",
    "items": [
      {"name":"VEG KOLHAPURI","price":260},
      {"name":"VEG MARATHA","price":260},
      {"name":"MUSHROOM MASALA","price":260},
      {"name":"VEG DIWANI HANDI","price":260},
      {"name":"PANEER MUSALLAM","price":380},
      {"name":"PANEER BUTTER MASALA","price":340},
      {"name":"PANEER TIKKA MASALA","price":360},
      {"name":"PANEER LABABDAR","price":340},
      {"name":"ADRAKI DHANIYA PANEER","price":340},
      {"name":"PALAK PANEER","price":340},
      {"name":"MALAI KOFTA","price":360},
      {"name":"KAJU MASALA","price":390},
      {"name":"DAL FRY","price":210},
      {"name":"DAL TADKA","price":230}
    ]
  },
  {
    "title": "NORTH INDIAN(NON-VEG)",
    "items": [
      {"name":"BUTTER CHICKEN FULL","price":850},
      {"name":"BUTTER CHICKEN HALF","price":460},
      {"name":"CHICKEN KOLHAPURI","price":380},
      {"name":"CHICKEN TIKKA MASALA","price":390},
      {"name":"MURG MUSALLAM FULL","price":999},
      {"name":"MURG MUSALLAM HALF","price":549},
      {"name":"CHICKEN KADAI","price":380},
      {"name":"NAWABI MURGH","price":390},
      {"name":"DUM MALAI MURGH","price":410},
      {"name":"GOSHT ROGAN JOSH","price":430},
      {"name":"ADRAKI BHUNA GOSHT","price":430},
      {"name":"GOSHT BANJARA","price":440},
      {"name":"GOSHT HARA MASALA","price":430}
    ]
  },
  {
    "title": "CHINESE MAIN-COURSE (NONVEG)",
    "items": [
      {"name":"KUNG PAO CHICKEN","price":320},
      {"name":"PRAWNS BUTTER GARLIC","price":549},
      {"name":"VEG THAI CURRY(RED/GREEN)","price":290},
      {"name":"CHICKEN THAI CURRY(RED/GREEN)","price":410},
      {"name":"PRAWNS THAI CURRY(RED/GREEN)","price":480}
    ]
  },
  {
    "title": "INDIAN BREADS",
    "items": [
      {"name":"PLAIN ROTI","price":30},
      {"name":"BUTTER ROTI","price":35},
      {"name":"NAAN","price":55},
      {"name":"BUTTER NAAN","price":65},
      {"name":"KULCHA","price":45},
      {"name":"BUTTER KULCHA","price":55},
      {"name":"PARATHA","price":45},
      {"name":"BUTTER PARATHA","price":55},
      {"name":"PLAIN GARLIC NAAN","price":120},
      {"name":"BUTTER GARLIC NAAN","price":130},
      {"name":"BHAKRI","price":30},
      {"name":"AMBOLI","price":40},
      {"name":"GHAVNE[2PSC]","price":60}
    ]
  },
  {
    "title": "RICE & BIRYANI (VEG)",
    "items": [
      {"name":"INDRAYANI RICE","price":{"full":120,"half":110}},
      {"name":"STEAMED RICE","price":{"full":130,"half":70}},
      {"name":"JEERA RICE","price":{"full":170,"half":130}}, 
      {"name":"DAL KHICHDI","price":250},
      {"name":"PALAK KHICHDI","price":250},
      {"name":"VEG PULAO","price":240},
      {"name":"VEG BIRYANI","price":260}
    ]
  },
  {
    "title": "RICE & BIRYANI (NONVEG)",
    "items": [
      {"name":"CHICKEN BIRYANI","price":290},
      {"name":"MUTTON BIRYANI","price":410},
      {"name":"PRAWNS BIRYANI","price":450},
      {"name":"CHICKEN KALA PULAO","price":350},
      {"name":"TOMATO KOLAMBI BHAAT","price":450}
    ]
  },
  {
    "title": "CHINESE RICE & NOODLES",
    "items": [
      {"name":"VEG FRIED RICE","price":240},
      {"name":"CHICKEN FRIED RICE","price":310},
      {"name":"PRAWNS FRIED RICE","price":450},
      {"name":"VEG SCHEZVAN FRIED RICE","price":250},
      {"name":"CHICKEN SCHEZWAN FRIED RICE","price":320},
      {"name":"PRAWNS SCHEZWAN FRIED RICE","price":460},
      {"name":"VEG HAKKA NOODLE","price":240},
      {"name":"CHICKEN HAKKA NOODLE","price":310},
      {"name":"VEG SCHEZWAN NOODLE","price":250},
      {"name":"CHICKEN SCHEZWAN NOODLE","price":320},
      {"name":"PRAWNS SCHEZWAN NOODLE","price":450},
      {"name":"VEG TRIPLE SCHEZWAN FRIED RICE","price":340},
      {"name":"CHICKEN TRIPLE SCHEZWAN FRIED RICE","price":410}
     ]
   },
   {
    "title": "CHEF SPECIAL DISHES",
    "items": [
      {"name":"CHEF SPECIAL VEG DUM BIRYANI","price":260},
      {"name":"CHEF SPECIAL CHICKEN DUM BIRYANI","price":349},
      {"name":"CHEF SPECAIL MUTTON DUM BIRYANI","price":449}, 
      {"name":"CHEF SPECAIL PANEER DUM BIRYANI","price":290}, 
      {"name":"CHEF SPECAIL EGG DUM BIRYANI","price":360}   
    ]
  },
  {
    "title": "BIRYANI (1KG)",
    "items": [
      {"name":"VEG BIRYANI 1KG","price":1099},
      {"name":"CHICKEN BIRYANI 1KG","price":1399},
      {"name":"MUTTON BIRYANI 1KG","price":1599}   
    ]
  },
  {
    "title": "REFRESHMENT",
    "items": [
      {"name":"SOLKADI","price":85},
      {"name":"THUMSUP/SPRITE(500ML)","price":60},
      {"name":"BUTTER MILK","price":80}
    ]
  },
  {
    "title": "DESSERTS",
    "items": [
      {"name":"GULAB JAMUN","price":95},
      {"name":"CARAMEL CUSTERD","price":110},
      {"name":"BROWNIE","price":170}
   ]
  },
  {
    "title": "ALSO AVAILABLE",
    "items": [
      {"name":"SEAFOOD LOBSTER DISHES","price":"APC"},
      {"name":"KAPRI POMFRET DISHES","price":"APC"},
      {"name":"BABY JITADA DISHES","price":"APC"},
      {"name":"BASA FISH DISHES","price":"APC"}
    ]
  }
];

/* Render menu with support for items having price.full/price.half */
function renderMenu(){
  var menuEl = document.getElementById('menu');
  menuEl.innerHTML = '';

  for (var i = 0; i < menuData.length; i++) {
    var sec = menuData[i];
    var section = document.createElement('div');
    section.className = 'section collapsed';

    var title = document.createElement('h3');
    if (sec.title === 'BEST SELLER VEG ITEMS' || sec.title === 'BEST SELLER NON-VEG ITEMS' || sec.title === 'BEST SELLER NONVEG ITEMS') {
      title.innerHTML = 'ðŸ‘‘ ' + sec.title;
    } else {
      title.appendChild(document.createTextNode(sec.title));
    }

    title.onclick = (function(sectionRef){
      return function(){
        var isExpanded = sectionRef.classList.contains('expanded');
        var allSections = document.querySelectorAll('.section');
        for (var s = 0; s < allSections.length; s++) {
          allSections[s].classList.add('collapsed');
          allSections[s].classList.remove('expanded');
        }
        if (!isExpanded) {
          sectionRef.classList.add('expanded');
          sectionRef.classList.remove('collapsed');
        }
      };
    })(section);

    section.appendChild(title);

    var itemsContainer = document.createElement('div');
    itemsContainer.className = 'items-container';

    for (var j = 0; j < sec.items.length; j++) {
      var item = sec.items[j];
      var row = document.createElement('div');
      row.className = 'item';

      var nameSpan = document.createElement('span');
      nameSpan.className = 'item-name';
      nameSpan.appendChild(document.createTextNode(item.name));

      var priceSpan = document.createElement('span');
priceSpan.className = 'item-price';

      if (typeof item.price === 'object') {
        // create a vertical button wrapper aligned to the right
        var btnsWrap = document.createElement('div');
        btnsWrap.style.display = 'flex';
        btnsWrap.style.flexDirection = 'column';
        btnsWrap.style.alignItems = 'flex-end';
        btnsWrap.style.gap = '6px';
        btnsWrap.style.minWidth = '120px';

        if (item.price.full) {
          var btnFull = document.createElement('button');
          btnFull.className = 'add-btn';
          btnFull.style.margin = '3px 0';
          btnFull.appendChild(document.createTextNode('FULL â‚¹' + item.price.full + ' â€” Add'));
          (function(it){
            btnFull.onclick = function(){
              addToCartWithSize(it, 'FULL', it.price.full);
            };
          })(item);
          btnsWrap.appendChild(btnFull);
        }

        if (item.price.half) {
          var btnHalf = document.createElement('button');
          btnHalf.className = 'add-btn';
          btnHalf.style.margin = '3px 0';
          btnHalf.appendChild(document.createTextNode('HALF â‚¹' + item.price.half + ' â€” Add'));
          (function(it){
            btnHalf.onclick = function(){
              addToCartWithSize(it, 'HALF', it.price.half);
            };
          })(item);
          btnsWrap.appendChild(btnHalf);
        }

        priceSpan.appendChild(btnsWrap);
      } else {
        var priceDisplay = item.price === 'APC' ? 'APC' : 'â‚¹' + item.price;
        var priceText = document.createElement('span');
        priceText.appendChild(document.createTextNode(priceDisplay + ' '));

        var btn = document.createElement('button');
        btn.className = 'add-btn';
        btn.appendChild(document.createTextNode('Add'));
        if (item.price !== 'APC') {
          (function(it){
            btn.onclick = function(){
              addToCart(it);
            };
          })(item);
        } else {
          btn.style.display = 'none';
        }
        priceSpan.appendChild(priceText);
        priceSpan.appendChild(btn);
      }

      row.appendChild(nameSpan);
      row.appendChild(priceSpan);
      itemsContainer.appendChild(row);
    }

    if (sec.title === 'ALSO AVAILABLE') {
      var info1 = document.createElement('div');
      info1.className = 'info-row';
      info1.appendChild(document.createTextNode('APC: (AS PER COST)'));
      itemsContainer.appendChild(info1);

      var info2 = document.createElement('div');
      info2.className = 'info-row';
      info2.appendChild(document.createTextNode('CALL FOR MORE INFORMATION'));
      itemsContainer.appendChild(info2);
    }

    section.appendChild(itemsContainer);
    menuEl.appendChild(section);
  }
}

var cart = {};

function addToCart(item){
  var key = item.name;
  if(!cart[key]) cart[key] = {price:item.price, qty:0, label:item.name};
  cart[key].qty++;
  renderCart();
}

function addToCartWithSize(item, sizeLabel, price){
  var key = item.name + ' (' + sizeLabel + ')';
  if(!cart[key]) cart[key] = {price:price, qty:0, label:item.name + ' (' + sizeLabel + ')', baseName: item.name, size: sizeLabel};
  cart[key].qty++;
  renderCart();
}

function changeQty(key,delta){
  if(!cart[key]) return;
  cart[key].qty += delta;
  if(cart[key].qty <= 0) delete cart[key];
  renderCart();
}

function removeItem(key){
  delete cart[key];
  renderCart();
}

function renderCart(){
  var c = document.getElementById('cart-items');
  c.innerHTML = '';
  var subtotal = 0;
  var keys = Object.keys(cart);
  if(keys.length === 0){
    c.innerHTML = '(No items yet)';
    return;
  }
  for(var i = 0; i < keys.length; i++){
    var name = keys[i];
    var obj = cart[name];
    var div = document.createElement('div');
    div.className = 'cart-item';

    var nameDiv = document.createElement('div');
    nameDiv.innerHTML = '<strong>' + obj.label + '</strong> â‚¹' + obj.price;
    div.appendChild(nameDiv);

    var qtyDiv = document.createElement('div');
    qtyDiv.className = 'qty-controls';

    var minusBtn = document.createElement('button');
    minusBtn.className = 'qty-btn';
    minusBtn.appendChild(document.createTextNode('-'));
    (function(nm){
      minusBtn.onclick = function(){ changeQty(nm,-1); };
    })(name);

    var qtySpan = document.createElement('span');
    qtySpan.appendChild(document.createTextNode(obj.qty));

    var plusBtn = document.createElement('button');
    plusBtn.className = 'qty-btn';
    plusBtn.appendChild(document.createTextNode('+'));
    (function(nm){
      plusBtn.onclick = function(){ changeQty(nm,1); };
    })(name);

    qtyDiv.appendChild(minusBtn);
    qtyDiv.appendChild(qtySpan);
    qtyDiv.appendChild(plusBtn);
    div.appendChild(qtyDiv);

    var remBtn = document.createElement('button');
    remBtn.className = 'remove-btn';
    remBtn.appendChild(document.createTextNode('Remove'));
    (function(nm){
      remBtn.onclick = function(){ removeItem(nm); };
    })(name);

    div.appendChild(remBtn);
    c.appendChild(div);

    subtotal += parseFloat(obj.price) * obj.qty;
  }
  var discount = subtotal * 0.1;
  var afterDiscount = subtotal - discount;
  var cgst = afterDiscount * 0.025;
  var sgst = afterDiscount * 0.025;
  var grandTotal = Math.round(afterDiscount + cgst + sgst);
  var summary = document.createElement('div');
  summary.style.marginTop = '10px';
  summary.innerHTML = '<hr><div>Subtotal: â‚¹' + subtotal.toFixed(2) + '</div>' +
    '<div>Discount (0%): -â‚¹' + discount.toFixed(02) + '</div>' +
    '<div>CGST (2.5%): â‚¹' + cgst.toFixed(2) + '</div>' +
    '<div>SGST (2.5%): â‚¹' + sgst.toFixed(2) + '</div>' +
    '<hr><div style="font-weight:bold;">Grand Total: â‚¹' + grandTotal + '</div>';
  c.appendChild(summary);
}

function generateMessage(){
  var subtotal = 0;
  var name;
  for(name in cart){
    if(cart.hasOwnProperty(name)){
      var o = cart[name];
      subtotal += o.price * o.qty;
    }
  }
  var discount = subtotal * 0.1;
  var afterDiscount = subtotal - discount;
  var cgst = afterDiscount * 0.025;
  var sgst = afterDiscount * 0.025;
  var grandTotal = Math.round(afterDiscount + cgst + sgst);
  var msg = 'Hello Malvan Tadka Kharghar, Iâ€™d like to order:\n\n';
  for(name in cart){
    if(cart.hasOwnProperty(name)){
      var o2 = cart[name];
      msg += o2.label + ' x ' + o2.qty + ' = â‚¹' + (o2.price*o2.qty).toFixed(2) + '\n';
    }
  }
  msg += '\nSubtotal: â‚¹' + subtotal.toFixed(2) +
         '\nDiscount (0%): -â‚¹' + discount.toFixed(2) +
         '\nCGST (2.5%): â‚¹' + cgst.toFixed(2) +
         '\nSGST (2.5%): â‚¹' + sgst.toFixed(2) +
         '\n---------------------\nGrand Total: â‚¹' + grandTotal;
  msg += '\n\nFor confirmation, please call: 9833688666';
  return msg;
}

document.getElementById('checkout').onclick = function(){
  if(Object.keys(cart).length === 0){
    alert('Cart is empty');
    return;
  }
  prefillSavedDetails();
  document.getElementById('modal-content').textContent = generateMessage();
  document.getElementById('modal-bg').style.display = 'flex';
};

document.getElementById('close-modal').onclick = function(){
  document.getElementById('modal-bg').style.display = 'none';
};

function getFormData(){
  var nameField = document.getElementById('name');
  var mobileField = document.getElementById('mobile');
  var buildingField = document.getElementById('building');
  var flatField = document.getElementById('flat');
  var sectorField = document.getElementById('sector');

  var firstTime = !localStorage.getItem('detailsFilled');

  if(firstTime){
    var name = nameField.value.replace(/^\s+|\s+$/g,'');
    var mobile = mobileField.value.replace(/^\s+|\s+$/g,'');
    var building = buildingField.value.replace(/^\s+|\s+$/g,'');
    var flat = flatField.value.replace(/^\s+|\s+$/g,'');
    var sector = sectorField.value.replace(/^\s+|\s+$/g,'');

    if(!name || !mobile || !building || !flat || !sector){
      alert('Please fill all details before sending order.');
      return null;
    }

    localStorage.setItem('detailsFilled','yes');
    localStorage.setItem('savedName',name);
    localStorage.setItem('savedMobile',mobile);
    localStorage.setItem('savedBuilding',building);
    localStorage.setItem('savedFlat',flat);
    localStorage.setItem('savedSector',sector);

    return {name: name, mobile: mobile, building: building, flat: flat, sector: sector};
  }

  nameField.value = localStorage.getItem('savedName') || '';
  mobileField.value = localStorage.getItem('savedMobile') || '';
  buildingField.value = localStorage.getItem('savedBuilding') || '';
  flatField.value = localStorage.getItem('savedFlat') || '';
  sectorField.value = localStorage.getItem('savedSector') || '';

  return {
    name: nameField.value,
    mobile: mobileField.value,
    building: buildingField.value,
    flat: flatField.value,
    sector: sectorField.value
  };
}

function prefillSavedDetails(){
  if(!localStorage.getItem('detailsFilled')) return;
  document.getElementById('name').value     = localStorage.getItem('savedName')     || '';
  document.getElementById('mobile').value   = localStorage.getItem('savedMobile')   || '';
  document.getElementById('building').value = localStorage.getItem('savedBuilding') || '';
  document.getElementById('flat').value     = localStorage.getItem('savedFlat')     || '';
  document.getElementById('sector').value   = localStorage.getItem('savedSector')   || '';
}

// Use location.href for WhatsApp to improve iOS compatibility
document.getElementById('whatsapp-send').onclick = function(){
  var form = getFormData();
  if(!form) return;
  var message = encodeURIComponent(
    generateMessage() +
    '\n\nCustomer Details:\nName: ' + form.name +
    '\nMobile: ' + form.mobile +
    '\nBuilding: ' + form.building +
    '\nFlat / Room: ' + form.flat +
    '\nSector: ' + form.sector
  );
  var url = 'https://wa.me/919833688666?text=' + message;
  // Use location.href instead of window.open for better iPhone behavior
  location.href = url;
};

document.getElementById('edit-details').onclick = function(){
  localStorage.removeItem('detailsFilled');
  document.getElementById('delivery-form').style.display = 'flex';
  document.getElementById('name').value = '';
  document.getElementById('mobile').value = '';
  document.getElementById('building').value = '';
  document.getElementById('flat').value = '';
  document.getElementById('sector').value = '';
};

function searchMenu() {
  var query = document.getElementById('searchBar').value.toLowerCase();
  var sections = document.querySelectorAll('.section');

  for (var i = 0; i < sections.length; i++) {
    var section = sections[i];
    var items = section.querySelectorAll('.item');
    var matchFound = false;

    for (var j = 0; j < items.length; j++) {
      var item = items[j];
      var name = item.querySelector('.item-name').textContent.toLowerCase();
      if (name.indexOf(query) !== -1) {
        item.style.display = 'flex';
        matchFound = true;
      } else {
        item.style.display = 'none';
      }
    }

    if (matchFound) {
      section.style.display = 'block';
      section.classList.add('expanded');
      section.classList.remove('collapsed');
    } else {
      section.style.display = 'none';
    }

    if (query === '') {
      section.style.display = 'block';
      section.classList.add('collapsed');
      section.classList.remove('expanded');
      for (var k = 0; k < items.length; k++) {
        items[k].style.display = 'flex';
      }
    }
  }
}

document.getElementById('searchBar').addEventListener('keyup', searchMenu);
document.getElementById('searchBar').addEventListener('input', searchMenu);

renderMenu();
renderCart();
</script>
</body>
</html>
